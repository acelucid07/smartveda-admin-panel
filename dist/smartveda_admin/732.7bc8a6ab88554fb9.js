"use strict";(self.webpackChunkAdmin_Panel=self.webpackChunkAdmin_Panel||[]).push([[732],{1732:(wt,U,a)=>{a.r(U),a.d(U,{MarketingManagementModule:()=>yt});var c=a(9808),f=a(1083),u=a(8441),t=a(5e3),_=a(7650),d=a(520),g=a(9646);a(2340);let m=[{id:12,Country:"India",Title:"Super Off",Code:"KMDR214K",couponType:"fixed",CustomerId:"",startDate:"2022-10-10",endDate:"2022-10-22",quotaPerUser:"10",firstTimeUser:!0,maxDiscountAmount:" 85",miniBillAmount:"800",status:!0,discount:"85",date:"2022-10-10",description:"Save upto  Rs 85"},{id:233,Country:"India",Title:"Super Off",Code:"KMD5214K",couponType:"fixed",CustomerId:"",startDate:"2022-10-22",endDate:"2022-11-12",quotaPerUser:"2",status:!0,firstTimeUser:!1,maxDiscountAmount:" 98",miniBillAmount:"900",discount:"98",date:"2022-10-22",description:"Save upto  Rs 98"},{id:234,Country:"India",Title:"Super Off",Code:"PMDR214K",couponType:"fixed",CustomerId:"",startDate:"2022-11-28",status:!1,endDate:"2022-12-10",quotaPerUser:"5",firstTimeUser:!0,maxDiscountAmount:" 105",miniBillAmount:"800",discount:"105",date:"2022-11-28",description:"Save upto  Rs 105"},{id:235,Country:"India",Title:"Super Off",Code:"SQMDR214K",couponType:"percentage",CustomerId:"",startDate:"2022-11-28",endDate:"2022-12-28",quotaPerUser:"5",status:!0,firstTimeUser:!1,maxDiscountAmount:" 125",miniBillAmount:"1000",discount:"25",date:"2022-11-28",description:"Save upto  Rs 125"},{id:236,Country:"India",Title:"Super Off",Code:"ASWDR214K",couponType:"percentage",CustomerId:"",startDate:"2022-09-12",endDate:"2022-10-12",quotaPerUser:"5",status:!0,firstTimeUser:!1,maxDiscountAmount:" 200",miniBillAmount:"1000",discount:"25",date:"2022-09-12",description:"Save upto  Rs 200"}],w=[{id:1254,couponCodeId:2312,couponCodeName:"saveExtra",customerEmail:"testuser@test.com",appliedOn:"2022-10-21",completedOn:"2022-11-22",status:"Cancelled"},{id:1255,couponCodeId:2313,couponCodeName:"saveExtra25",customerEmail:"testuser1@test.com",appliedOn:"2022-10-21",completedOn:"2022-10-22",status:"Completed"},{id:1256,couponCodeId:2314,couponCodeName:"saveExtra10%",customerEmail:"testuser121@test.com",appliedOn:"2022-10-21",completedOn:"2022-11-22",status:"Pending"},{id:1257,couponCodeId:2315,couponCodeName:"BlackFridayDeals",customerEmail:"testuser12431@test.com",appliedOn:"2022-10-21",completedOn:"2022-11-22",status:"Completed"},{id:1258,couponCodeId:2316,couponCodeName:"EndOfReasonDeals",customerEmail:"testuser12341@test.com",appliedOn:"2022-10-21",completedOn:"2022-11-22",status:"Cancelled"},{id:1259,couponCodeId:2317,couponCodeName:"ThanksGiving",customerEmail:"testuser143@test.com",appliedOn:"2022-10-21",completedOn:"2022-11-22",status:"Pending"}],T=(()=>{class o{constructor(e){this.http=e}getCouponList(){const e=localStorage.getItem("token")||"";return(new d.WM).set("x-access-token",e),(0,g.of)(m)}getActiveCouponList(){const e=localStorage.getItem("token")||"";(new d.WM).set("x-access-token",e);let p=m.filter(l=>!0===l.status);return(0,g.of)(p)}getInActiveCouponList(){const e=localStorage.getItem("token")||"";(new d.WM).set("x-access-token",e);let p=m.filter(l=>!1===l.status);return(0,g.of)(p)}addCouponCode(e){const n=localStorage.getItem("token")||"";return(new d.WM).set("x-access-token",n),m.push(e),(0,g.of)(e)}getCouponCodeById(e){const n=localStorage.getItem("token")||"";(new d.WM).set("x-access-token",n);let l=m.findIndex(C=>C.id===e);return(0,g.of)(m[l])}editCouponCode(e,n){const r=localStorage.getItem("token")||"";(new d.WM).set("x-access-token",r);let C=m.findIndex(y=>y.Code===e);return m[C]=n,(0,g.of)(n)}getRewardRedemptionList(){const e=localStorage.getItem("token")||"";return(new d.WM).set("x-access-token",e),(0,g.of)(w)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(d.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=a(2888),I=a(3251),A=a(4851),v=a(9783),q=a(1424),h=a(845),x=a(4119);const N=["dt"];function F(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"span",11),t._UZ(2,"i",12),t.TgZ(3,"input",13),t.NdJ("input",function(r){return t.CHM(e),t.oxw().applyFilterGlobal(r,"contains")}),t.qZA(),t.qZA(),t.qZA()}}function P(o,i){if(1&o&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.headers)}}function R(o,i){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"S.No"),t.qZA(),t.YNc(3,P,2,1,"th",14),t.TgZ(4,"th"),t._uU(5,"Options"),t.qZA(),t.qZA()),2&o){const e=i.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}function M(o,i){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"button",15),t.qZA(),t.qZA()),2&o){const e=i.rowIndex,n=i.$implicit,r=t.oxw();t.xp6(2),t.Oqu(e+1),t.xp6(2),t.Oqu(n.Country),t.xp6(2),t.Oqu(n.Code),t.xp6(2),t.Oqu(n.Title),t.xp6(2),t.Oqu(n.couponType),t.xp6(2),t.Oqu(n.endDate),t.xp6(2),t.Oqu(n.firstTimeUser),t.xp6(2),t.Q6J("disabled",!r.deleteAccess)}}function k(o,i){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",16),t._uU(2," No Records Found. "),t.qZA(),t.qZA())}const E=function(){return["Code"]};let L=(()=>{class o{constructor(e,n,r){this.ngxLoader=e,this.toastr=n,this.MarketingService=r,this.couponData=[]}ngOnInit(){this.fgsType=u.aS.squareLoader,this.ngxLoader.start(),this.getActiveCouponList(),this.cols=[{field:"Country",show:!0,headers:"Country"},{field:"Code",show:!0,headers:"Code"},{field:"Title",show:!0,headers:"Promotion Name"},{field:"couponType",show:!0,headers:"Promo Code Type"},{field:"endDate",show:!0,headers:"End Date"},{field:"firstTimeUser",show:!0,headers:"first Time User"}]}getActiveCouponList(){this.MarketingService.getActiveCouponList().subscribe(e=>{this.couponData=e,this.ngxLoader.stop()})}applyFilterGlobal(e,n){this.dt.filterGlobal(e.target.value,n),console.log(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.LA),t.Y36(_.$),t.Y36(T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-active-coupon"]],viewQuery:function(e,n){if(1&e&&t.Gf(N,5),2&e){let r;t.iGM(r=t.CRH())&&(n.dt=r.first)}},inputs:{deleteAccess:"deleteAccess"},decls:12,vars:10,consts:[[1,"page-heading"],[1,"header-text-title",2,"margin-left","1%"],[1,"card","col-sm-12",2,"border","none"],["id","customerTable","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-striped",3,"value","columns","paginator","rows","showCurrentPageReport","responsive","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"fgsColor","fgsType"],[1,"row"],[1,"p-input-icon-right","ml-5"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by Code",3,"input"],[4,"ngFor","ngForOf"],["pButton","","type","button","icon","pi pi-trash","pTooltip","In-Active promotion","tooltipPosition","bottom",1,"p-button-danger",3,"disabled"],["colspan","12",1,"text-center","text-danger","font-weight-700"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t.TgZ(2,"h6",1),t._uU(3,"All Active Coupons"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"p-table",3,4),t.YNc(7,F,4,0,"ng-template",5),t.YNc(8,R,6,1,"ng-template",6),t.YNc(9,M,17,8,"ng-template",7),t.YNc(10,k,3,0,"ng-template",8),t.qZA(),t._UZ(11,"ngx-ui-loader",9),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("value",n.couponData)("columns",n.cols)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("responsive",!0)("globalFilterFields",t.DdM(9,E)),t.xp6(6),t.Q6J("fgsColor","#000000")("fgsType",n.fgsType))},directives:[A.iA,v.jx,q.o,c.sg,h.Hq,x.u,u.Eo],styles:[""]}),o})();const J=["dt"];function Y(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"span",11),t._UZ(2,"i",12),t.TgZ(3,"input",13),t.NdJ("input",function(r){return t.CHM(e),t.oxw().applyFilterGlobal(r,"contains")}),t.qZA(),t.qZA(),t.qZA()}}function B(o,i){if(1&o&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.headers)}}function Q(o,i){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"S.No"),t.qZA(),t.YNc(3,B,2,1,"th",14),t.TgZ(4,"th"),t._uU(5,"Options"),t.qZA(),t.qZA()),2&o){const e=i.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}function $(o,i){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.TgZ(16,"div",15),t._UZ(17,"button",16),t.qZA(),t.qZA(),t.qZA()),2&o){const e=i.rowIndex,n=i.$implicit,r=t.oxw();t.xp6(2),t.Oqu(e+1),t.xp6(2),t.Oqu(n.Country),t.xp6(2),t.Oqu(n.Code),t.xp6(2),t.Oqu(n.Title),t.xp6(2),t.Oqu(n.couponType),t.xp6(2),t.Oqu(n.endDate),t.xp6(2),t.Oqu(n.firstTimeUser),t.xp6(3),t.Q6J("disabled",!r.deleteAccess)}}function G(o,i){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",17),t._uU(2," No Records Found. "),t.qZA(),t.qZA())}const H=function(){return["Code"]};let V=(()=>{class o{constructor(e,n,r){this.ngxLoader=e,this.toastr=n,this.MarketingService=r,this.couponData=[]}ngOnInit(){this.fgsType=u.aS.squareLoader,this.ngxLoader.start(),this.getInActiveCouponList(),this.cols=[{field:"Country",show:!0,headers:"Country"},{field:"Code",show:!0,headers:"Code"},{field:"Title",show:!0,headers:"Promotion Name"},{field:"couponType",show:!0,headers:"Promo Code Type"},{field:"endDate",show:!0,headers:"End Date"},{field:"firstTimeUser",show:!0,headers:"first Time User"}]}getInActiveCouponList(){this.MarketingService.getInActiveCouponList().subscribe(e=>{this.couponData=e,this.ngxLoader.stop()})}applyFilterGlobal(e,n){this.dt.filterGlobal(e.target.value,n),console.log(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.LA),t.Y36(_.$),t.Y36(T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-inactive-coupon"]],viewQuery:function(e,n){if(1&e&&t.Gf(J,5),2&e){let r;t.iGM(r=t.CRH())&&(n.dt=r.first)}},inputs:{deleteAccess:"deleteAccess"},decls:12,vars:10,consts:[[1,"page-heading"],[1,"header-text-title",2,"margin-left","1%"],[1,"card","col-sm-12",2,"border","none"],["id","customerTable","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-striped",3,"value","columns","paginator","rows","showCurrentPageReport","responsive","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"fgsColor","fgsType"],[1,"row"],[1,"p-input-icon-right","ml-5"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by coupon code",3,"input"],[4,"ngFor","ngForOf"],[1,"btn-grp"],["pButton","","type","button","icon","pi pi-trash","pTooltip","InActive coupon","tooltipPosition","bottom",1,"p-button-danger",3,"disabled"],["colspan","12",1,"text-center","text-danger","font-weight-700"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t.TgZ(2,"h6",1),t._uU(3,"All InActive Coupons"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"p-table",3,4),t.YNc(7,Y,4,0,"ng-template",5),t.YNc(8,Q,6,1,"ng-template",6),t.YNc(9,$,18,8,"ng-template",7),t.YNc(10,G,3,0,"ng-template",8),t.qZA(),t._UZ(11,"ngx-ui-loader",9),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("value",n.couponData)("columns",n.cols)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("responsive",!0)("globalFilterFields",t.DdM(9,H)),t.xp6(6),t.Q6J("fgsColor","#000000")("fgsType",n.fgsType))},directives:[A.iA,v.jx,q.o,c.sg,h.Hq,x.u,u.Eo],styles:[".btn-grp[_ngcontent-%COMP%]{display:flex}"]}),o})();const j=["dt"],K=function(){return["/marketing/addpromo"]};function W(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"div",16),t._UZ(2,"i",17),t.TgZ(3,"input",18),t.NdJ("input",function(r){return t.CHM(e),t.oxw().applyFilterGlobal(r,"contains")}),t.qZA(),t.qZA(),t.TgZ(4,"div",16),t._UZ(5,"button",19),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("routerLink",t.DdM(2,K))("disabled",!e.accessPermission.add)}}function X(o,i){if(1&o&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.headers)}}function z(o,i){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"S.No"),t.qZA(),t.YNc(3,X,2,1,"th",20),t.TgZ(4,"th"),t._uU(5,"Options"),t.qZA(),t.qZA()),2&o){const e=i.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}const tt=function(){return["/marketing/editpromo"]},et=function(o){return{id:o}};function ot(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.TgZ(16,"div",21),t._UZ(17,"button",22),t.TgZ(18,"button",23),t.NdJ("click",function(){const p=t.CHM(e).$implicit;return t.oxw().InActivate(null==p?null:p.Code)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=i.rowIndex,n=i.$implicit,r=t.oxw();t.xp6(2),t.Oqu(e+1),t.xp6(2),t.Oqu(n.Country),t.xp6(2),t.Oqu(n.Code),t.xp6(2),t.Oqu(n.Title),t.xp6(2),t.Oqu(n.couponType),t.xp6(2),t.Oqu(n.endDate),t.xp6(2),t.Oqu(n.status),t.xp6(3),t.Q6J("routerLink",t.DdM(11,tt))("queryParams",t.VKq(12,et,null==n?null:n.id))("disabled",!r.accessPermission.edit),t.xp6(1),t.Q6J("disabled",!r.accessPermission.delete)}}function nt(o,i){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",24),t._uU(2," No Records Found. "),t.qZA(),t.qZA())}const it=function(){return["Code"]};let rt=(()=>{class o{constructor(e,n,r,p){this.ngxLoader=e,this.toastr=n,this.MarketingService=r,this.permissionService=p,this.couponData=[],this.permissionService.getModulePermission().subscribe(l=>{this.accessPermission=l[0].MarketingCoupon,console.log(this.accessPermission)})}ngOnInit(){this.sidebarSpacing="contracted",this.fgsType=u.aS.squareLoader,this.ngxLoader.start(),this.sidebarSpacing="contracted",this.getCouponList(),this.cols=[{field:"Country",show:!0,headers:"Country"},{field:"Code",show:!0,headers:"Code"},{field:"Title",show:!0,headers:"Promotion Name"},{field:"couponType",show:!0,headers:"Promo Code Type"},{field:"endDate",show:!0,headers:"End Date"},{field:"status",show:!0,headers:"Status"}]}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}getCouponList(){this.MarketingService.getCouponList().subscribe(e=>{this.couponData=e,this.ngxLoader.stop()})}InActivate(e){}applyFilterGlobal(e,n){this.dt.filterGlobal(e.target.value,n),console.log(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.LA),t.Y36(_.$),t.Y36(T),t.Y36(D.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-coupons"]],viewQuery:function(e,n){if(1&e&&t.Gf(j,5),2&e){let r;t.iGM(r=t.CRH())&&(n.dt=r.first)}},decls:17,vars:12,consts:[[1,"page-heading"],[1,"header-text-title",2,"margin-left","1%"],["mat-align-tabs","start"],["label","All Coupons"],[1,"card","col-sm-12",2,"border","none"],["id","customerTable","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-striped",3,"value","columns","paginator","rows","showCurrentPageReport","responsive","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"fgsColor","fgsType"],["label","Active"],[3,"deleteAccess"],["label","InActivate"],[1,"row"],[1,"p-input-icon-right","ml-5"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by Code",3,"input"],["pButton","","type","button","label","Add New Promo",1,"p-button-success",3,"routerLink","disabled"],[4,"ngFor","ngForOf"],[1,"btn-grp"],["pButton","","type","button","icon","pi pi-user-edit","pTooltip","Edit Promotion","tooltipPosition","bottom",1,"p-button-warning",2,"margin-right","5px",3,"routerLink","queryParams","disabled"],["pButton","","type","button","icon","pi pi-trash","pTooltip","In-Active promotion","tooltipPosition","bottom",1,"p-button-danger",3,"disabled","click"],["colspan","12",1,"text-center","text-danger","font-weight-700"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2,"Promo Code Details"),t.qZA(),t.qZA(),t.TgZ(3,"mat-tab-group",2),t.TgZ(4,"mat-tab",3),t.TgZ(5,"div",4),t.TgZ(6,"p-table",5,6),t.YNc(8,W,6,3,"ng-template",7),t.YNc(9,z,6,1,"ng-template",8),t.YNc(10,ot,19,14,"ng-template",9),t.YNc(11,nt,3,0,"ng-template",10),t.qZA(),t._UZ(12,"ngx-ui-loader",11),t.qZA(),t.qZA(),t.TgZ(13,"mat-tab",12),t._UZ(14,"app-active-coupon",13),t.qZA(),t.TgZ(15,"mat-tab",14),t._UZ(16,"app-inactive-coupon",13),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("value",n.couponData)("columns",n.cols)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("responsive",!0)("globalFilterFields",t.DdM(11,it)),t.xp6(6),t.Q6J("fgsColor","#000000")("fgsType",n.fgsType),t.xp6(2),t.Q6J("deleteAccess",n.accessPermission.delete),t.xp6(2),t.Q6J("deleteAccess",n.accessPermission.delete))},directives:[I.SP,I.uX,A.iA,v.jx,q.o,h.Hq,f.rH,c.sg,x.u,u.Eo,L,V],styles:[".btn-grp[_ngcontent-%COMP%]{display:flex}"]}),o})();var b=a(6660),s=a(3075),st=a(7673),at=a(1370);function pt(o,i){if(1&o&&(t.TgZ(0,"option",54),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.s9C("value",e.email),t.xp6(1),t.hij("",e.email," ")}}function ut(o,i){if(1&o&&(t.TgZ(0,"select",52),t.TgZ(1,"option",17),t._uU(2,"Select customer"),t.qZA(),t.YNc(3,pt,2,2,"option",53),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.customer)}}function lt(o,i){if(1&o&&(t.TgZ(0,"option",56),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.email)}}function ct(o,i){if(1&o&&(t.TgZ(0,"select",52),t.TgZ(1,"option",17),t._uU(2,"Select customer"),t.qZA(),t.YNc(3,lt,2,1,"option",55),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.customer)}}const S=function(){return["/marketing"]};let O=(()=>{class o{constructor(e,n,r,p,l,C,y,Ut){this.fb=e,this.toastr=n,this.ngxLoader=r,this.promoService=p,this.activateRoute=l,this.CommonService=C,this.route=y,this.userService=Ut,this.promoList=[],this.editMode=!1,this.title=" ",this.expand=!1,this.promotionForm=this.fb.group({Country:["",[s.kI.required]],Title:["",[s.kI.required]],Code:["",[s.kI.required]],couponType:["",[s.kI.required]],CustomerId:["",[s.kI.required]],startDate:["",[s.kI.required]],endDate:["",[s.kI.required]],quotaPerUser:["",[s.kI.required]],firstTimeUser:["",[s.kI.required]],status:["",[s.kI.required]],maxDiscountAmount:["",[s.kI.required]],miniBillAmount:["",[s.kI.required]],discount:["",[s.kI.required]],date:["",[s.kI.required]],description:["",[s.kI.required]]})}ngOnInit(){this.sidebarSpacing="contracted",this.activateRoute.queryParamMap.subscribe(e=>{this.promoId=parseInt(e.get("id")),console.log("promo id "+this.promoId),this.promoId&&null!=this.promoId?(this.editMode=!0,this.title="Edit Promo",this.getPromoById()):(this.editMode=!1,this.expand=!0,this.title="Add New Promotion")}),this.getCustomer()}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}addPromo(e){this.promoService.addCouponCode(e).subscribe(n=>{n?(this.toastr.showSuccess("Promotion Created Successfully","Success!"),this.route.navigate(["/marketing"])):(this.toastr.showError("Something going wrong ","Promotion creation failed"),this.route.navigate(["/marketing"]))})}getPromoById(){this.promoService.getCouponCodeById(this.promoId).subscribe(e=>{this.promotionForm.patchValue({Country:e.Country,Title:e.Title,Code:e.Code,couponType:e.couponType,CustomerId:this.customer,startDate:this.CommonService.convertDate(e.startDate),endDate:this.CommonService.convertDate(e.endDate),quotaPerUser:e.quotaPerUser,firstTimeUser:e.firstTimeUser,status:e.status,maxDiscountAmount:e.maxDiscountAmount,miniBillAmount:e.miniBillAmount,discount:e.discount,date:this.CommonService.convertDate(e.date),description:e.description}),console.log(this.promotionForm.value)})}submitPromo(){this.payload={id:parseInt(this.CommonService.generateRandomeOrderId()),Country:this.promotionForm.controls.Country.value,Title:this.promotionForm.controls.Title.value,Code:this.promotionForm.controls.Code.value,couponType:this.promotionForm.controls.couponType.value,CustomerId:this.promotionForm.controls.CustomerId.value,startDate:this.CommonService.convertDate(this.promotionForm.controls.startDate.value),endDate:this.CommonService.convertDate(this.promotionForm.controls.endDate.value),quotaPerUser:this.promotionForm.controls.quotaPerUser.value,firstTimeUser:this.promotionForm.controls.firstTimeUser.value,status:this.promotionForm.controls.status.value,maxDiscountAmount:this.promotionForm.controls.maxDiscountAmount.value,miniBillAmount:this.promotionForm.controls.miniBillAmount.value,discount:this.promotionForm.controls.discount.value,date:this.CommonService.convertDate(this.promotionForm.controls.date.value),description:this.promotionForm.controls.description.value},this.ngxLoader.start(),this.editMode?(this.editPromo(this.payload),console.log(this.payload)):(this.addPromo(this.payload),console.log(this.payload))}editPromo(e){this.promoService.editCouponCode(e,this.promoId).subscribe(n=>{n&&(this.toastr.showSuccess("Promo code edit successfully","Promo edit"),this.ngxLoader.stop(),this.route.navigate(["/marketing"]))})}getCustomer(){this.userService.getUsers().subscribe(e=>{this.customer=e.data})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(_.$),t.Y36(u.LA),t.Y36(T),t.Y36(f.gz),t.Y36(st.v),t.Y36(f.F0),t.Y36(at.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-edit-coupon"]],decls:113,vars:12,consts:[[1,"page-heading"],[1,"header-text-title"],["pButton","","pTooltip","Back","tooltipPosition","bottom",1,"pi","pi-arrow-left","p-button-text",3,"routerLink"],[3,"formGroup"],[1,"card","col-sm-12"],[1,"row","gutters"],[1,"col-xl-6","col-lg-6","col-md-6","col-sm-6","col-12","mt-4"],[1,"form-group"],["for","country","id","label"],["type","text","placeholder","Select Country","formControlName","Country",1,"form-control"],["for","title","id","label"],["type","text","placeholder","Enter promo title","formControlName","Title",1,"form-control"],["for","code","id","label"],["type","text","placeholder","Enter Code","formControlName","Code",1,"form-control"],[1,"col-xl-3","col-lg-3","col-md-3","col-sm-3","col-12","mt-4"],["for","type","id","label"],["formControlName","couponType",1,"form-control"],["value","","selected","","disabled",""],["value","fixed"],["value","percentage"],["class","form-control","formControlName","CustomerId",4,"ngIf"],["for","startDate","id","label"],["type","date","placeholder","Select Start Date","formControlName","startDate","id","startDate","name","startDate",1,"form-control"],["for","endDate","id","label"],["type","date","placeholder","Select End Date","formControlName","endDate","name","endDate",1,"form-control"],["for","quota","id","label"],["type","number","placeholder","0","formControlName","quotaPerUser",1,"form-control"],[1,"col-xl-2","col-lg-2","col-md-2","col-sm-2","col-12","mt-4","form-group"],["for","firstTimeUser"],[1,"form-check","form-check-inline","form-control"],["type","radio","name","firstTimeUser","formControlName","firstTimeUser",1,"form-check-input","ml-3",3,"value"],["for","yes",1,"form-check-label"],["type","radio","name","firstTimeUser","formControlName","firstTimeUser",1,"form-check-input","ml-5",3,"value"],["for","no",1,"form-check-label"],["for","maxAMount","id","label"],["type","text","placeholder","Maximum discount","formControlName","maxDiscountAmount",1,"form-control"],["for","minAmount","id","label"],["type","text","placeholder","Minimum Bill Amount","formControlName","miniBillAmount",1,"form-control"],["for","discount","id","label"],["type","text","placeholder","Discount","formControlName","discount",1,"form-control"],["for","date","id","label"],["type","date","formControlName","date",1,"form-control"],["for","status"],["type","radio","name","status","formControlName","status",1,"form-check-input","ml-3",3,"value"],["for","active",1,"form-check-label"],["type","radio","name","status","formControlName","status",1,"form-check-input","ml-5",3,"value"],["for","InActive",1,"form-check-label"],["for","description","id","label"],["type","text","placeholder","Description","formControlName","description",1,"form-control"],[1,"text-right","mt-4"],["type","submit",1,"btn","btn-danger","mb-4","mr-2",3,"routerLink"],["type","submit",1,"btn","btn-success","mb-4",3,"click"],["formControlName","CustomerId",1,"form-control"],["selected","",3,"value",4,"ngFor","ngForOf"],["selected","",3,"value"],["value","","selected","",4,"ngFor","ngForOf"],["value","","selected",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._UZ(2,"i",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"form",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"label",8),t._uU(10,"Country"),t.qZA(),t._UZ(11,"input",9),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"div",7),t.TgZ(14,"label",10),t._uU(15,"Title"),t.qZA(),t._UZ(16,"input",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"div",6),t.TgZ(19,"div",7),t.TgZ(20,"label",12),t._uU(21,"Code"),t.qZA(),t._UZ(22,"input",13),t.qZA(),t.qZA(),t.TgZ(23,"div",14),t.TgZ(24,"label",15),t._uU(25,"Type"),t.qZA(),t.TgZ(26,"div",7),t.TgZ(27,"select",16),t.TgZ(28,"option",17),t._uU(29,"Select Promo Type"),t.qZA(),t.TgZ(30,"option",18),t._uU(31,"Fixed"),t.qZA(),t.TgZ(32,"option",19),t._uU(33,"Percentage"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",14),t.TgZ(35,"label",15),t._uU(36,"Select Customer"),t.qZA(),t.TgZ(37,"div",7),t.YNc(38,ut,4,1,"select",20),t.YNc(39,ct,4,1,"select",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",5),t.TgZ(41,"div",6),t.TgZ(42,"div",7),t.TgZ(43,"label",21),t._uU(44,"Start Date"),t.qZA(),t._UZ(45,"input",22),t.qZA(),t.qZA(),t.TgZ(46,"div",6),t.TgZ(47,"div",7),t.TgZ(48,"label",23),t._uU(49,"End Date"),t.qZA(),t._UZ(50,"input",24),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",5),t.TgZ(52,"div",6),t.TgZ(53,"div",7),t.TgZ(54,"label",25),t._uU(55,"Quota per user"),t.qZA(),t._UZ(56,"input",26),t.qZA(),t.qZA(),t.TgZ(57,"div",27),t.TgZ(58,"div",7),t.TgZ(59,"label",28),t._uU(60,"First Time User"),t.qZA(),t.TgZ(61,"div",29),t._UZ(62,"input",30),t.TgZ(63,"label",31),t._uU(64,"Yes"),t.qZA(),t._UZ(65,"input",32),t.TgZ(66,"label",33),t._uU(67,"No"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",5),t.TgZ(69,"div",6),t.TgZ(70,"div",7),t.TgZ(71,"label",34),t._uU(72,"Maximum Discount Amount"),t.qZA(),t._UZ(73,"input",35),t.qZA(),t.qZA(),t.TgZ(74,"div",14),t.TgZ(75,"label",36),t._uU(76,"Minimum Bill Amount"),t.qZA(),t.TgZ(77,"div",7),t._UZ(78,"input",37),t.qZA(),t.qZA(),t.TgZ(79,"div",14),t.TgZ(80,"label",38),t._uU(81,"Discount"),t.qZA(),t.TgZ(82,"div",7),t._UZ(83,"input",39),t.qZA(),t.qZA(),t.qZA(),t.TgZ(84,"div",5),t.TgZ(85,"div",14),t.TgZ(86,"label",40),t._uU(87,"Date"),t.qZA(),t.TgZ(88,"div",7),t._UZ(89,"input",41),t.qZA(),t.qZA(),t.TgZ(90,"div",14),t.TgZ(91,"div",7),t.TgZ(92,"label",42),t._uU(93,"Status"),t.qZA(),t.TgZ(94,"div",29),t.TgZ(95,"div"),t._UZ(96,"input",43),t.TgZ(97,"label",44),t._uU(98,"Active"),t.qZA(),t.qZA(),t.TgZ(99,"div"),t._UZ(100,"input",45),t.TgZ(101,"label",46),t._uU(102,"InActive"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(103,"div",6),t.TgZ(104,"div",7),t.TgZ(105,"label",47),t._uU(106,"Description"),t.qZA(),t._UZ(107,"input",48),t.qZA(),t.qZA(),t.qZA(),t.TgZ(108,"div",49),t.TgZ(109,"button",50),t._uU(110,"Back"),t.qZA(),t.TgZ(111,"button",51),t.NdJ("click",function(){return n.submitPromo()}),t._uU(112,"Submit"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("routerLink",t.DdM(10,S)),t.xp6(1),t.hij("",n.title," "),t.xp6(1),t.Q6J("formGroup",n.promotionForm),t.xp6(34),t.Q6J("ngIf","Add New Promotion"==n.title),t.xp6(1),t.Q6J("ngIf","Edit Promo"==n.title),t.xp6(23),t.Q6J("value",!0),t.xp6(3),t.Q6J("value",!1),t.xp6(31),t.Q6J("value",!0),t.xp6(4),t.Q6J("value",!1),t.xp6(9),t.Q6J("routerLink",t.DdM(11,S)))},directives:[h.Hq,x.u,f.rH,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.EJ,s.YN,s.Kr,c.O5,c.sg,s.wV,s._],styles:["#label[_ngcontent-%COMP%]{font-weight:500}"]}),o})();const dt=["dt"];function mt(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"span",10),t._UZ(2,"i",11),t.TgZ(3,"input",12),t.NdJ("input",function(r){return t.CHM(e),t.oxw().applyFilterGlobal(r,"contains")}),t.qZA(),t.qZA(),t.qZA()}}function gt(o,i){if(1&o&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Oqu(e.headers)}}function Zt(o,i){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"S.No"),t.qZA(),t.YNc(3,gt,2,1,"th",13),t.qZA()),2&o){const e=i.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}function ft(o,i){if(1&o&&(t.TgZ(0,"button",17),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.status)}}function Tt(o,i){if(1&o&&(t.TgZ(0,"button",18),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.status)}}function ht(o,i){if(1&o&&(t.TgZ(0,"button",19),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.status)}}function Ct(o,i){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.YNc(14,ft,2,1,"button",14),t.YNc(15,Tt,2,1,"button",15),t.YNc(16,ht,2,1,"button",16),t.qZA(),t.qZA()),2&o){const e=i.rowIndex,n=i.$implicit;t.xp6(2),t.Oqu(e+1),t.xp6(2),t.Oqu(n.couponCodeId),t.xp6(2),t.Oqu(n.couponCodeName),t.xp6(2),t.Oqu(n.customerEmail),t.xp6(2),t.Oqu(n.appliedOn),t.xp6(2),t.Oqu(n.completedOn),t.xp6(2),t.Q6J("ngIf","Completed"==n.status),t.xp6(1),t.Q6J("ngIf","Pending"==n.status),t.xp6(1),t.Q6J("ngIf","Cancelled"==n.status)}}function _t(o,i){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",20),t._uU(2," No Records Found. "),t.qZA(),t.qZA())}const At=function(){return["couponCodeName"]},qt=[{path:"",component:rt,canActivate:[b.P]},{path:"addpromo",component:O,canActivate:[b.P]},{path:"editpromo",component:O,canActivate:[b.P]},{path:"redemption",component:(()=>{class o{constructor(e,n){this.ngxLoader=e,this.MarketingService=n,this.rewardsRedemptionData=[]}ngOnInit(){this.sidebarSpacing="contracted",this.fgsType=u.aS.squareLoader,this.ngxLoader.start(),this.sidebarSpacing="contracted",this.getRewardRedemption(),this.cols=[{field:"couponCodeId",show:!0,headers:"Coupon Id"},{field:"couponCodeName",show:!0,headers:"Coupon Name"},{field:"customerEmail",show:!0,headers:"Customer Email"},{field:"appliedOn",show:!0,headers:"Applied On"},{field:"completedOn",show:!0,headers:"Completed On"},{field:"status",show:!0,headers:"Status"}]}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}getRewardRedemption(){this.MarketingService.getRewardRedemptionList().subscribe(e=>{this.rewardsRedemptionData=e}),console.log(w)}applyFilterGlobal(e,n){this.dt.filterGlobal(e.target.value,n),console.log(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.LA),t.Y36(T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rewards"]],viewQuery:function(e,n){if(1&e&&t.Gf(dt,5),2&e){let r;t.iGM(r=t.CRH())&&(n.dt=r.first)}},decls:10,vars:8,consts:[[1,"page-heading"],[1,"header-text-title",2,"margin-left","1%"],[1,"card","col-sm-12",2,"border","none"],["id","rewardsTable","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-striped",3,"value","columns","paginator","rows","showCurrentPageReport","responsive","globalFilterFields"],["dt",""],["pTemplate","caption"],["class","text-center","pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"row"],[1,"p-input-icon-right","ml-5"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search by coupon name",3,"input"],[4,"ngFor","ngForOf"],["class","p-button-success text-center","pButton","","type","button","id","statusBtn",4,"ngIf"],["class","p-button-primary text-center","pButton","","type","button","id","statusBtn",4,"ngIf"],["class","p-button-danger text-center","pButton","","type","button","id","statusBtn",4,"ngIf"],["pButton","","type","button","id","statusBtn",1,"p-button-success","text-center"],["pButton","","type","button","id","statusBtn",1,"p-button-primary","text-center"],["pButton","","type","button","id","statusBtn",1,"p-button-danger","text-center"],["colspan","6",1,"text-center","text-danger","font-weight-700"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2,"Reward Redemption"),t.qZA(),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"p-table",3,4),t.YNc(6,mt,4,0,"ng-template",5),t.YNc(7,Zt,4,1,"ng-template",6),t.YNc(8,Ct,17,9,"ng-template",7),t.YNc(9,_t,3,0,"ng-template",8),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("value",n.rewardsRedemptionData)("columns",n.cols)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("responsive",!0)("globalFilterFields",t.DdM(7,At)))},directives:[A.iA,v.jx,q.o,c.sg,c.O5,h.Hq],styles:["#statusBtn[_ngcontent-%COMP%]{height:25px;width:100px}"]}),o})(),canActivate:[b.P]}];let xt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(qt)],f.Bz]}),o})();var bt=a(5115);let yt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.ez,xt,bt.m]]}),o})()}}]);