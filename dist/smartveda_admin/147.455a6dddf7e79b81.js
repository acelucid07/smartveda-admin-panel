"use strict";(self.webpackChunkAdmin_Panel=self.webpackChunkAdmin_Panel||[]).push([[147],{6147:(ot,v,r)=>{r.r(v),r.d(v,{SettingRatingModule:()=>nt});var h=r(9808),m=r(1083),x=r(574),R=r(4327),S=r(3583),y=r(2983),q=r.n(y),t=r(5e3),g=r(8966),T=r(7423);let F=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-lead-view"]],decls:10,vars:1,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-button","",1,"dialog1","mr-2",3,"mat-dialog-close"],["mat-button","","mat-dialog-close","",1,"dialog1"]],template:function(e,n){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Delete Rating Criteria Detail"),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.TgZ(3,"h3"),t._uU(4,"Do you want to delete this Record?"),t.qZA(),t.qZA(),t.TgZ(5,"mat-dialog-actions",2),t.TgZ(6,"button",3),t._uU(7,"Yes"),t.qZA(),t.TgZ(8,"button",4),t._uU(9,"Cancel"),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("mat-dialog-close",!0))},directives:[g.uh,g.xY,g.H8,T.lW,g.ZT],styles:["mat-dialog-content[_ngcontent-%COMP%]{width:600px}[_nghost-%COMP%]  .dialog1{background-color:#d4d6d6;border-radius:5px;outline:none}"]}),i})();var u=r(520),C=(r(2340),r(9646));const l=[{sno:1,ratingCriteria:"Food Quality",status:"Active"},{sno:2,ratingCriteria:"Cleaniness",status:"Active"},{sno:3,ratingCriteria:"Ambiance",status:"Inactive"},{sno:4,ratingCriteria:"Staff",status:"Inactive"}];let b=(()=>{class i{constructor(e){this.http=e}getCriteriaList(){const e=localStorage.getItem("token")||"";return(new u.WM).set("x-access-token",e),(0,C.of)(l)}getCriteriaDetails(e){const n=localStorage.getItem("token")||"";(new u.WM).set("x-access-token",n),console.log(l);let p=l.filter(d=>d.sno==e);return(0,C.of)(p)}submitCriteriaDetail(e){const n=localStorage.getItem("token")||"";return(new u.WM).set("x-access-token",n),e.sno=l.length+1,l.push(e),console.log(l),(0,C.of)(l)}submitEditedCriteriaDetail(e,n){const o=localStorage.getItem("token")||"";return(new u.WM).set("x-access-token",o),l.map(d=>{d.sno==n&&(d.ratingCriteria=e.ratingCriteria,d.status=e.status)}),(0,C.of)(l)}deleteCriteriaDetails(e){const n=localStorage.getItem("token")||"";(new u.WM).set("x-access-token",n);let p=l.splice(l.findIndex(d=>d.ratingCriteria==e),1);return(0,C.of)(p)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(u.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var D=r(2888),Z=r(4851),E=r(9783),M=r(1424),N=r(845),A=r(6526),c=r(3075),w=r(4119);const J=["dt"];function U(i,a){1&i&&(t.TgZ(0,"div",16),t.TgZ(1,"span",17),t._uU(2,"Status Picker"),t.qZA(),t.qZA())}function P(i,a){if(1&i&&(t.TgZ(0,"div",20),t.TgZ(1,"span",21),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e)}}function O(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-multiSelect",18),t.NdJ("onChange",function(o){return[t.CHM(e).filterCallback(o.value)]}),t.YNc(1,P,3,1,"ng-template",19),t.qZA()}if(2&i){const e=a.$implicit,n=t.oxw(2);t.Q6J("ngModel",e)("options",n.statusList)}}const _=function(){return["/ratesettings/ratingcriteriaform"]};function k(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",7),t.TgZ(1,"div"),t._UZ(2,"input",8,9),t.TgZ(4,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(3);return t.oxw().applyFilterGlobal(o.value,"contains")}),t._uU(5,"Search"),t.qZA(),t.qZA(),t.TgZ(6,"div",11),t.TgZ(7,"div",12),t.TgZ(8,"p-columnFilter",13),t.YNc(9,U,3,0,"ng-template",3),t.YNc(10,O,2,2,"ng-template",14),t.qZA(),t.qZA(),t.TgZ(11,"button",15),t._uU(12,"Add"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(8),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(3),t.Q6J("routerLink",t.DdM(5,_))("disabled",!e.accessPermission.add)}}function I(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th",22),t._uU(2,"Rating Criteria"),t.qZA(),t.TgZ(3,"th",22),t._uU(4,"Status"),t.qZA(),t.TgZ(5,"th",22),t._uU(6,"Actions"),t.qZA(),t.qZA())}const L=function(i){return{serialno:i}};function Y(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"div"),t._UZ(7,"button",23),t.TgZ(8,"button",24),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().openDialog(s.ratingCriteria)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.ratingCriteria),t.xp6(2),t.Oqu(e.status),t.xp6(3),t.Q6J("routerLink",t.DdM(6,_))("queryParams",t.VKq(7,L,e.sno))("disabled",!n.accessPermission.edit),t.xp6(1),t.Q6J("disabled",!n.accessPermission.delete)}}function Q(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",25),t._uU(2,"No Records to Show"),t.qZA(),t.qZA())}function j(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(4).exportCSV()}),t.qZA(),t.TgZ(2,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportExcel()}),t.qZA(),t.TgZ(3,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportPdf()}),t.qZA(),t.qZA()}}const B=function(){return["ratingCriteria"]};let H=(()=>{class i{constructor(e,n,o){this.ratingCriteriaService=e,this.dialog=n,this.permissionService=o,this.sidebarSpacing="contracted",this.statusList=["Active","Inactive"],this.permissionService.getModulePermission().subscribe(s=>{this.accessPermission=s[0].RatingSetting,console.log(this.accessPermission),this.getCriteriaList()})}ngOnInit(){this.cols=[{field:"ratingCriteria",headers:"Rating Criteria"},{field:"status",headers:"Status"}],this.exportColumns=this.cols.map(e=>({title:e.headers,dataKey:e.field})),console.log(this.exportColumns)}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}getCriteriaList(){this.ratingCriteriaService.getCriteriaList().subscribe(e=>{this.ratingSettingData=e})}openDialog(e){this.dialog.open(F).afterClosed().subscribe(o=>{1==o&&this.deleteCriteriaDetail(e)})}deleteCriteriaDetail(e){this.ratingCriteriaService.deleteCriteriaDetails(e).subscribe(n=>{n&&this.getCriteriaList()})}exportExcel(){const n={Sheets:{data:x.utils.json_to_sheet(this.ratingSettingData)},SheetNames:["data"]},o=x.write(n,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(o,"ratingCriterias")}saveAsExcelFile(e,n){const p=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});R.saveAs(p,n+"_export_"+(new Date).getTime()+".xlsx")}exportPdf(){this.ratingData=this.ratingSettingData;const e=new S.jsPDF("l","pt");q()(e,{columns:this.exportColumns,body:this.ratingData}),e.save("ratingCriteria.pdf")}applyFilterGlobal(e,n){this.dt.filterGlobal(e,n)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b),t.Y36(g.uw),t.Y36(D.y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-rating-criteria"]],viewQuery:function(e,n){if(1&e&&t.Gf(J,5),2&e){let o;t.iGM(o=t.CRH())&&(n.dt=o.first)}},decls:10,vars:8,consts:[["id","customerTable","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-striped",3,"columns","paginator","rows","showCurrentPageReport","value","responsive","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[1,"d-flex","justify-content-between"],["pInputText","","type","text","placeholder","Search by Criteria",1,"mr-2"],["search",""],["pButton","",1,"p-button-success",3,"click"],[1,"d-flex","justify-content-center"],[1,"captionFilter"],["field","status","matchMode","in","display","menu",1,"filterButton",3,"showMatchModes","showOperator","showAddButton"],["pTemplate","filter"],["pButton","",3,"routerLink","disabled"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["placeholder","Any",3,"ngModel","options","onChange"],["pTemplate","item"],[1,"p-multiselect-representative-option"],[1,"ml-1"],[1,"text-center"],["pButton","","pTooltip","Edit Criteria","tooltipPosition","bottom","icon","pi pi-user-edit",1,"p-button-secondary","mr-3",3,"routerLink","queryParams","disabled"],["pButton","","pTooltip","Delete Criteria","tooltipPosition","bottom","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["colspan","12",1,"text-danger"],["pButton","","icon","pi pi-file","pTooltip","CSV","tooltipPosition","bottom",1,"mr-2",3,"click"],["pButton","","icon","pi pi-file-excel","pTooltip","Excel","tooltipPosition","bottom",1,"mr-2",3,"click"],["pButton","","icon","pi pi-file-pdf","pTooltip","Pdf","tooltipPosition","bottom",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h4"),t._uU(2,"Rating Criteria List"),t.qZA(),t.qZA(),t.TgZ(3,"p-table",0,1),t.YNc(5,k,13,6,"ng-template",2),t.YNc(6,I,7,0,"ng-template",3),t.YNc(7,Y,9,9,"ng-template",4),t.YNc(8,Q,3,0,"ng-template",5),t.YNc(9,j,4,0,"ng-template",6),t.qZA()),2&e&&(t.xp6(3),t.Q6J("columns",n.cols)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("value",n.ratingSettingData)("responsive",!0)("globalFilterFields",t.DdM(7,B)))},directives:[Z.iA,E.jx,M.o,N.Hq,Z.xl,A.NU,c.JJ,c.On,m.rH,w.u],styles:['[_nghost-%COMP%]  .captionFilter p-columnFilter .p-column-filter>button:before{content:"Filter";margin-right:10px}[_nghost-%COMP%]  .captionFilter p-columnFilter .p-column-filter>button{width:100px;height:40.5px;border-radius:3px;font-size:large;margin:1px 5px 1px 1px;padding:15px 20px;border:1px solid #ced4da}']}),i})();var V=r(4036);function $(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"div",18),t._uU(2,"Criteria is required"),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("hidden",!e.criteriaForm.controls.name.errors.required)}}function z(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"div",19),t._uU(2,"Status is required"),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("hidden",!e.criteriaForm.controls.status.errors.required)}}const G=function(){return["/ratesettings/ratingcriterialist"]},W=[{path:"ratingcriterialist",component:H},{path:"ratingcriteriaform",component:(()=>{class i{constructor(e,n,o,s){this.ratingCriteriaService=e,this.fb=n,this.route=o,this.activatedRoute=s,this.sidebarSpacing="contracted",this.statusList=["Active","Inactive"],this.criteriaForm=n.group({name:["",[c.kI.required]],status:["",[c.kI.required]]}),this.activatedRoute.queryParamMap.subscribe(p=>{this.id=parseInt(p.get("serialno")),this.id?(this.title="Edit",this.getRatingCriteriaDetail()):this.title="Add"})}ngOnInit(){}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}getRatingCriteriaDetail(){this.ratingCriteriaService.getCriteriaDetails(this.id).subscribe(e=>{console.log(e[0].ratingCriteria),this.criteriaForm.patchValue({name:e[0].ratingCriteria,status:e[0].status})})}submit(){let e={ratingCriteria:this.criteriaForm.controls.name.value,status:this.criteriaForm.controls.status.value};this.id?this.submitEditedDetails(e):this.submitDetails(e)}submitEditedDetails(e){let n=Object.assign({},e);this.ratingCriteriaService.submitEditedCriteriaDetail(n,this.id).subscribe(o=>{o&&this.route.navigate(["/ratesettings/ratingcriterialist"])})}submitDetails(e){let n=Object.assign({},e);this.ratingCriteriaService.submitCriteriaDetail(n).subscribe(o=>{o&&this.route.navigate(["/ratesettings/ratingcriterialist"])})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b),t.Y36(c.qu),t.Y36(m.F0),t.Y36(m.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-edit-rating-criteria"]],decls:29,vars:8,consts:[[1,"d-flex","justify-content-center"],[1,"card",2,"width","1000px","height","500px"],[1,"p-5"],[1,"card-body"],[1,"mt-2","mb-3"],[1,"d-flex","justify-content-center",3,"formGroup"],[1,"w-75"],[1,"row","mt-5"],[1,"form-group","col-10","d-flex","justify-content-center"],["for","criteriaName",1,"col-2","col-form-label","starlabel"],[1,"col-8"],["type","text","id","criteriaName","formControlName","name",1,"form-control"],[4,"ngIf"],["for","status",1,"col-2","col-form-label","starlabel"],["styleClass","statusDropdown","placeholder","Select status","formControlName","status",3,"options"],[1,"form-group","col-12","d-flex","justify-content-end"],["type","submit",1,"btn","btn-info","mr-3",3,"disabled","click"],[1,"btn","btn-info",3,"routerLink"],[2,"font-size","smaller","color","rgb(253, 122, 122)","font-style","italic","display","block",3,"hidden"],[2,"font-size","smaller","color","rgb(253, 122, 122)","font-style","italic",3,"hidden"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h3"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"form",5),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"div",8),t.TgZ(11,"label",9),t._uU(12,"Criteria"),t.qZA(),t.TgZ(13,"div",10),t._UZ(14,"input",11),t.YNc(15,$,3,1,"div",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",7),t.TgZ(17,"div",8),t.TgZ(18,"label",13),t._uU(19,"Status"),t.qZA(),t.TgZ(20,"div",10),t._UZ(21,"p-dropdown",14),t.YNc(22,z,3,1,"div",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",7),t.TgZ(24,"div",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return n.submit()}),t._uU(26,"Submit"),t.qZA(),t.TgZ(27,"button",17),t._uU(28,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.hij("",n.title," Rating Criteria"),t.xp6(1),t.Q6J("formGroup",n.criteriaForm),t.xp6(8),t.Q6J("ngIf",!n.criteriaForm.controls.name.valid&&n.criteriaForm.controls.name.touched),t.xp6(6),t.Q6J("options",n.statusList),t.xp6(1),t.Q6J("ngIf",!n.criteriaForm.controls.status.valid&&n.criteriaForm.controls.status.touched),t.xp6(3),t.Q6J("disabled",!n.criteriaForm.valid),t.xp6(2),t.Q6J("routerLink",t.DdM(7,G)))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,h.O5,V.Lt,m.rH],styles:['[_nghost-%COMP%]  .statusDropdown{width:100%}[_nghost-%COMP%]  label.starlabel:after{content:"*";color:#e41c1c}']}),i})()}];let X=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.ez,m.Bz.forChild(W)]]}),i})();var K=r(5115),tt=r(9224),et=r(9114),it=r(3407);let nt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.ez,K.m,A.q4,tt.QW,Z.U$,it.A,et.D,g.Is,T.ot,X]]}),i})()}}]);