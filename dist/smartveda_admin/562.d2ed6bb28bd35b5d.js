"use strict";(self.webpackChunkAdmin_Panel=self.webpackChunkAdmin_Panel||[]).push([[562],{4562:(nt,Z,i)=>{i.r(Z),i.d(Z,{SettingUsertypeModule:()=>st});var h=i(9808),g=i(1083),v=i(574),_=i(4327),C=i(3583),S=i(2983),q=i.n(S),t=i(5e3),d=i(8966),x=i(7423);let F=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-lead-view"]],decls:10,vars:1,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-button","",1,"dialog1","mr-2",3,"mat-dialog-close"],["mat-button","","mat-dialog-close","",1,"dialog1"]],template:function(e,s){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Delete UserType Detail"),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.TgZ(3,"h3"),t._uU(4,"Do you want to delete this Record?"),t.qZA(),t.qZA(),t.TgZ(5,"mat-dialog-actions",2),t.TgZ(6,"button",3),t._uU(7,"Yes"),t.qZA(),t.TgZ(8,"button",4),t._uU(9,"Cancel"),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("mat-dialog-close",!0))},directives:[d.uh,d.xY,d.H8,x.lW,d.ZT],styles:["mat-dialog-content[_ngcontent-%COMP%]{width:600px}[_nghost-%COMP%]  .dialog1{background-color:#d4d6d6;border-radius:5px;outline:none}"]}),o})();var m=i(520),f=(i(2340),i(9646));const p=[{sno:1,usertype:"Business",status:"Active"},{sno:2,usertype:"Family",status:"Active"},{sno:3,usertype:"Couple",status:"Inactive"},{sno:4,usertype:"Student",status:"Inactive"}];let U=(()=>{class o{constructor(e){this.http=e}getUsertypeList(){const e=localStorage.getItem("token")||"";return(new m.WM).set("x-access-token",e),(0,f.of)(p)}getUsertypeDetails(e){const s=localStorage.getItem("token")||"";(new m.WM).set("x-access-token",s),console.log(p);let c=p.filter(u=>u.sno==e);return(0,f.of)(c)}submitUsertypeDetail(e){const s=localStorage.getItem("token")||"";return(new m.WM).set("x-access-token",s),e.sno=p.length+1,p.push(e),console.log(p),(0,f.of)(p)}submitEditedUsertypeDetail(e,s){const n=localStorage.getItem("token")||"";return(new m.WM).set("x-access-token",n),p.map(u=>{u.sno==s&&(u.usertype=e.usertype,u.status=e.status)}),(0,f.of)(p)}deleteUsertypeDetails(e){const s=localStorage.getItem("token")||"";(new m.WM).set("x-access-token",s);let c=p.splice(p.findIndex(u=>u.usertype==e),1);return(0,f.of)(c)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(m.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=i(2888),T=i(4851),E=i(9783),M=i(1424),N=i(845),b=i(6526),a=i(3075),w=i(4119);const J=["dt"];function P(o,r){1&o&&(t.TgZ(0,"div",16),t.TgZ(1,"span",17),t._uU(2,"Status Picker"),t.qZA(),t.qZA())}function O(o,r){if(1&o&&(t.TgZ(0,"div",20),t.TgZ(1,"span",21),t._uU(2),t.qZA(),t.qZA()),2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e)}}function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"p-multiSelect",18),t.NdJ("onChange",function(n){return[t.CHM(e).filterCallback(n.value)]}),t.YNc(1,O,3,1,"ng-template",19),t.qZA()}if(2&o){const e=r.$implicit,s=t.oxw(2);t.Q6J("ngModel",e)("options",s.statusList)}}const A=function(){return["/usertypesettings/usertypeform"]};function R(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",7),t.TgZ(1,"div"),t._UZ(2,"input",8,9),t.TgZ(4,"button",10),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(3);return t.oxw().applyFilterGlobal(n.value,"contains")}),t._uU(5,"Search"),t.qZA(),t.qZA(),t.TgZ(6,"div",11),t.TgZ(7,"div",12),t.TgZ(8,"p-columnFilter",13),t.YNc(9,P,3,0,"ng-template",3),t.YNc(10,k,2,2,"ng-template",14),t.qZA(),t.qZA(),t.TgZ(11,"button",15),t._uU(12,"Add"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(8),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(3),t.Q6J("routerLink",t.DdM(5,A))("disabled",!e.accessPermission.add)}}function I(o,r){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"th",22),t._uU(2,"UserType"),t.qZA(),t.TgZ(3,"th",22),t._uU(4,"Status"),t.qZA(),t.TgZ(5,"th",22),t._uU(6,"Actions"),t.qZA(),t.qZA())}const L=function(o){return{serialno:o}};function Y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"div"),t._UZ(7,"button",23),t.TgZ(8,"button",24),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().openDialog(l.usertype)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit,s=t.oxw();t.xp6(2),t.Oqu(e.usertype),t.xp6(2),t.Oqu(e.status),t.xp6(3),t.Q6J("routerLink",t.DdM(6,A))("queryParams",t.VKq(7,L,e.sno))("disabled",!s.accessPermission.edit),t.xp6(1),t.Q6J("disabled",!s.accessPermission.delete)}}function j(o,r){1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",25),t._uU(2,"No Records to Show"),t.qZA(),t.qZA())}function Q(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(4).exportCSV()}),t.qZA(),t.TgZ(2,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportExcel()}),t.qZA(),t.TgZ(3,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportPdf()}),t.qZA(),t.qZA()}}const B=function(){return["usertype"]};let H=(()=>{class o{constructor(e,s,n){this.usertypeService=e,this.dialog=s,this.permissionService=n,this.sidebarSpacing="contracted",this.statusList=["Active","Inactive"],this.permissionService.getModulePermission().subscribe(l=>{this.accessPermission=l[0].RatingSetting,console.log(this.accessPermission),this.getUsertypeList()})}ngOnInit(){this.cols=[{field:"usertype",headers:"User Type"},{field:"status",headers:"Status"}],this.exportColumns=this.cols.map(e=>({title:e.headers,dataKey:e.field})),console.log(this.exportColumns)}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}getUsertypeList(){this.usertypeService.getUsertypeList().subscribe(e=>{this.usertypeSettingData=e})}openDialog(e){this.dialog.open(F).afterClosed().subscribe(n=>{1==n&&this.deleteUsertypeDetails(e)})}deleteUsertypeDetails(e){this.usertypeService.deleteUsertypeDetails(e).subscribe(s=>{s&&this.getUsertypeList()})}exportExcel(){const s={Sheets:{data:v.utils.json_to_sheet(this.usertypeSettingData)},SheetNames:["data"]},n=v.write(s,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(n,"usertype")}saveAsExcelFile(e,s){const c=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});_.saveAs(c,s+"_export_"+(new Date).getTime()+".xlsx")}exportPdf(){this.usertypeData=this.usertypeSettingData;const e=new C.jsPDF("l","pt");q()(e,{columns:this.exportColumns,body:this.usertypeData}),e.save("usertype.pdf")}applyFilterGlobal(e,s){this.dt.filterGlobal(e,s)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U),t.Y36(d.uw),t.Y36(D.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-usertype"]],viewQuery:function(e,s){if(1&e&&t.Gf(J,5),2&e){let n;t.iGM(n=t.CRH())&&(s.dt=n.first)}},decls:10,vars:8,consts:[["id","customerTable","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-striped",3,"columns","paginator","rows","showCurrentPageReport","value","responsive","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[1,"d-flex","justify-content-between"],["pInputText","","type","text","placeholder","Search by Usertype",1,"mr-2"],["search",""],["pButton","",1,"p-button-success",3,"click"],[1,"d-flex","justify-content-center"],[1,"captionFilter"],["field","status","matchMode","in","display","menu",1,"filterButton",3,"showMatchModes","showOperator","showAddButton"],["pTemplate","filter"],["pButton","",3,"routerLink","disabled"],[1,"px-3","pt-3","pb-0"],[1,"font-bold"],["placeholder","Any",3,"ngModel","options","onChange"],["pTemplate","item"],[1,"p-multiselect-representative-option"],[1,"ml-1"],[1,"text-center"],["pButton","","icon","pi pi-user-edit","pTooltip","Edit Usertype","tooltipPosition","bottom",1,"p-button-secondary","mr-3",3,"routerLink","queryParams","disabled"],["pButton","","icon","pi pi-trash","pTooltip","Delete Usertype","tooltipPosition","bottom",1,"p-button-danger",3,"disabled","click"],["colspan","12",1,"text-danger"],["pButton","","icon","pi pi-file","pTooltip","CSV","tooltipPosition","bottom",1,"mr-2",3,"click"],["pButton","","icon","pi pi-file-excel","pTooltip","Excel","tooltipPosition","bottom",1,"mr-2",3,"click"],["pButton","","icon","pi pi-file-pdf","pTooltip","Pdf","tooltipPosition","bottom",3,"click"]],template:function(e,s){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"h4"),t._uU(2,"UserType List"),t.qZA(),t.qZA(),t.TgZ(3,"p-table",0,1),t.YNc(5,R,13,6,"ng-template",2),t.YNc(6,I,7,0,"ng-template",3),t.YNc(7,Y,9,9,"ng-template",4),t.YNc(8,j,3,0,"ng-template",5),t.YNc(9,Q,4,0,"ng-template",6),t.qZA()),2&e&&(t.xp6(3),t.Q6J("columns",s.cols)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("value",s.usertypeSettingData)("responsive",!0)("globalFilterFields",t.DdM(7,B)))},directives:[T.iA,E.jx,M.o,N.Hq,T.xl,b.NU,a.JJ,a.On,g.rH,w.u],styles:['[_nghost-%COMP%]  .captionFilter p-columnFilter .p-column-filter>button:before{content:"Filter";margin-right:10px}[_nghost-%COMP%]  .captionFilter p-columnFilter .p-column-filter>button{width:100px;height:40.5px;border-radius:3px;font-size:large;margin:1px 5px 1px 1px;padding:15px 20px;border:1px solid #ced4da}']}),o})();var V=i(4036);function $(o,r){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"div",18),t._uU(2,"Usertype is required"),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("hidden",!e.usertypeForm.controls.usertype.errors.required)}}function z(o,r){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"div",19),t._uU(2,"Status is required"),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("hidden",!e.usertypeForm.controls.status.errors.required)}}const G=function(){return["/usertypesettings/usertypelist"]},W=[{path:"usertypelist",component:H},{path:"usertypeform",component:(()=>{class o{constructor(e,s,n,l){this.usertypeService=e,this.fb=s,this.route=n,this.activatedRoute=l,this.sidebarSpacing="contracted",this.statusList=["Active","Inactive"],this.usertypeForm=s.group({usertype:["",[a.kI.required]],status:["",[a.kI.required]]}),this.activatedRoute.queryParamMap.subscribe(c=>{this.id=parseInt(c.get("serialno")),this.id?(this.title="Edit",this.getUsertypeDetail()):this.title="Add"})}ngOnInit(){}onToggleSidebar(e){this.sidebarSpacing="open"===e?"contracted":"expanded"}getUsertypeDetail(){this.usertypeService.getUsertypeDetails(this.id).subscribe(e=>{console.log(e[0].ratingCriteria),this.usertypeForm.patchValue({usertype:e[0].usertype,status:e[0].status})})}submit(){let e={usertype:this.usertypeForm.controls.usertype.value,status:this.usertypeForm.controls.status.value};this.id?this.submitEditedDetails(e):this.submitDetails(e)}submitEditedDetails(e){let s=Object.assign({},e);this.usertypeService.submitEditedUsertypeDetail(s,this.id).subscribe(n=>{n&&this.route.navigate(["/usertypesettings/usertypelist"])})}submitDetails(e){let s=Object.assign({},e);this.usertypeService.submitUsertypeDetail(s).subscribe(n=>{n&&this.route.navigate(["/usertypesettings/usertypelist"])})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U),t.Y36(a.qu),t.Y36(g.F0),t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-edit-usertype"]],decls:29,vars:8,consts:[[1,"d-flex","justify-content-center"],[1,"card",2,"width","1000px","height","500px"],[1,"p-5"],[1,"card-body"],[1,"mt-2","mb-3"],[1,"d-flex","justify-content-center",3,"formGroup"],[1,"w-75"],[1,"row","mt-5"],[1,"form-group","col-10","d-flex","justify-content-center"],["for","criteriaName",1,"col-2","col-form-label","px-1","starlabel"],[1,"col-8"],["type","text","id","criteriaName","formControlName","usertype",1,"form-control"],[4,"ngIf"],["for","status",1,"col-2","col-form-label","starlabel"],["styleClass","statusDropdown","placeholder","Select status","formControlName","status",3,"options"],[1,"form-group","col-12","d-flex","justify-content-end"],["type","submit",1,"btn","btn-info","mr-3",3,"disabled","click"],[1,"btn","btn-info",3,"routerLink"],[2,"font-size","smaller","color","rgb(253, 122, 122)","font-style","italic","display","block",3,"hidden"],[2,"font-size","smaller","color","rgb(253, 122, 122)","font-style","italic",3,"hidden"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h3"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"form",5),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"div",8),t.TgZ(11,"label",9),t._uU(12,"Usertype"),t.qZA(),t.TgZ(13,"div",10),t._UZ(14,"input",11),t.YNc(15,$,3,1,"div",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",7),t.TgZ(17,"div",8),t.TgZ(18,"label",13),t._uU(19,"Status"),t.qZA(),t.TgZ(20,"div",10),t._UZ(21,"p-dropdown",14),t.YNc(22,z,3,1,"div",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",7),t.TgZ(24,"div",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return s.submit()}),t._uU(26,"Submit"),t.qZA(),t.TgZ(27,"button",17),t._uU(28,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.hij("",s.title," User Type"),t.xp6(1),t.Q6J("formGroup",s.usertypeForm),t.xp6(8),t.Q6J("ngIf",!s.usertypeForm.controls.usertype.valid&&s.usertypeForm.controls.usertype.touched),t.xp6(6),t.Q6J("options",s.statusList),t.xp6(1),t.Q6J("ngIf",!s.usertypeForm.controls.status.valid&&s.usertypeForm.controls.status.touched),t.xp6(3),t.Q6J("disabled",!s.usertypeForm.valid),t.xp6(2),t.Q6J("routerLink",t.DdM(7,G)))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,h.O5,V.Lt,g.rH],styles:['[_nghost-%COMP%]  .statusDropdown{width:100%}[_nghost-%COMP%]  label.starlabel:after{content:"*";color:#e41c1c}']}),o})()}];let X=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez,g.Bz.forChild(W)]]}),o})();var K=i(5115),tt=i(9224),et=i(9114),ot=i(3407);let st=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez,K.m,b.q4,tt.QW,T.U$,ot.A,et.D,d.Is,x.ot,X]]}),o})()}}]);