<div>
    <h4>User Permission List</h4>
</div>
<p-table #dt responsiveLayout="scroll" [paginator]="true" [rows]="10"
[showCurrentPageReport]="true" [value]="modulePermissionList"
currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [responsive]="true"
styleClass="p-datatable-striped" [globalFilterFields]="['username']">
<ng-template pTemplate="caption">
    <div class="d-flex justify-content-between">
    <div class="d-flex align-items-center">
        <input #search pInputText type="text" placeholder="Search By Username">
        <button pButton class="p-button-success ml-2" (click)="globalSearch(search.value,'contains')">Search</button>
    </div>
    <div><button pButton [routerLink]="['/modulepermission/permissionform']">Add</button></div>
</div>
</ng-template>
<ng-template pTemplate="header">
    <tr>
    <th class="text-center">Sno</th>
    <th class="text-center">User Name</th>
    <th class="text-center">Modules Permitted</th>
    <th class="text-center">Actions</th>
</tr>
</ng-template>
<ng-template pTemplate="body" let-i="rowIndex" let-list>
    <tr><td>{{i+1}}</td>
    <td>{{list.username}}</td>
    <td><div *ngFor="let module of list.moduleList">{{module}}</div></td>
    <td>
        <div>
        <button pButton class="p-button-secondary mr-2"icon="pi pi-user-edit" [routerLink]="['/modulepermission/permissionform']" [queryParams]="{user:list.username}"></button>
        <button pButton class="p-button-danger"icon="pi pi-trash" (click)="openDialog(list.username)"></button>
        </div>   
    </td>
</tr>
</ng-template>
<ng-template pTemplate="emptymessage">
    <tr>
        <td colspan="12" class="text-danger">No records to show</td>
    </tr>
</ng-template>
</p-table>
